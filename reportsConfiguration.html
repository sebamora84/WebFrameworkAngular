<?php
require './Api/User/VerifySession.php';
require './Api/Controls/Buttons.php';
verifySession();
?>
<!DOCTYPE html>
<html>
	<head>
		<title>Tracker - Configuracion de reportes</title>
		<link rel="stylesheet" href="./Styles/styles.css">
		<link rel="stylesheet" href="./Styles/jquery-ui.min.css">
		<script src="./Scripts/jquery-3.1.1.min.js"></script>
		<script src="./Scripts/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
		<script src="./Scripts/angular.min.js"></script>
		<script src="./Scripts/reportsConfiguration.js"></script>	
    </head>
	<body>
		<div id="reportsConfigurationWrapper" class="wrapper"  data-ng-app="reportsConfigurationApp">
			<div class="logoheaderwrap">
				<div class="logoheader">
					<div class="logo">
							<a href="./">
							  <img src="Images/logo.png" alt="Tracker" width="auto" height="30">
							</a>						
					</div>
				</div>
			</div>
			<div class="headerwrap">
				<div class="header">
					<div class="session">
						<?php 
							profileButton();
							sessionButton();
						?>
					</div>
				</div>
			</div>
			<div class="navigationwrap">
				<div class="navigation">
					<?php 
						menuButtons();
					?>
				</div>
			</div>
				
			<div class="leftcolumnwrap">
				<div class="leftcolumn">
				    <div data-ng-controller="reportSelectorCtrl">
						<h1>Configuración de Reportes</h1>
						<div id="reportDetailContainer">
							<table id="reportDetailTable">
								<thead>
									<tr>
										<th><label>Id</label></th>
										<th><label>Descripción</label></th>
									</tr>
								</thead>
								<tbody>
									<tr data-ng-repeat="report in reports" 
										data-ng-click="selectedReportChanged(report);"
										data-ng-class="{trSelected: report==selectedReport}"
										data-ng-cloak>
										<td>
											<label>{{report.id}}</label>
										</td>
										<td>
											<label>{{report.description}}</label>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>			
			<div class="middlecolumnwrap">
				<div class="middlecolumn">
					<div data-ng-controller="reportEditorCtrl">
						<div class="reportEditor">
							<p><label for="reportId">Id</label> 
							<p><input id="reportId" data-ng-model="report.id" disabled="disabled">		
							<p><label for="reportDescription">Descripcion</label>
							<p><input id="reportDescription" data-ng-model="report.description">
							<p><label for="reportDescription">SQL</label>
							<p><textarea id="reportSql" data-ng-model="report.sql"></textarea>
							<p><label for="reportParameters">Parametros</label>
							<p><textarea id="reportParameters" data-ng-model="report.parameters"></textarea>
						</div>
						<div class="reportEditorActions">
							<button id="newReportButton" data-ng-click="newReport();">Nuevo</button>	
							<button id="saveReportButton" data-ng-click="saveReport();">Guardar</button>
							<button id="deleteReportButton" data-ng-click="deleteReport();">Borrar</button>
						</div>
					</div>
				</div>
			</div>
			<div class="footerwrap">
				<div class="footer">
					
				</div>
			</div>
			<div class="poweredwrap">
				<div class="powered">
					<label> Powered by <a href="http://www.linkedin.com/in/sebastian-mora-b1785131">SM</a></label>
				</div>
			</div>	
		</div>	
	</body>
</html>